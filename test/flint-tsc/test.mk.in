.PHONY: all clean check

all: OUTPUT

clean:
	-rm -f OUTPUT OUTPUT.db

check: check-txt

check-txt: OUTPUT EXPECTED
	grep -f EXPECTED $< | diff -u $< -

OUTPUT.db: INPUT
	test-input1 $@ $<
	flint-phml $@

OUTPUT: OUTPUT.db
	flint-tsc $< /dev/null > $@
	-rm *.isd
